<mxfile host="app.diagrams.net" modified="2025-11-12T16:20:00.000Z" agent="5.0 (Windows)" version="24.7.13" editor="diagramly">
  <diagram id="notification-diagram" name="Notification System">
    <mxGraphModel dx="1512" dy="829" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="client" value="Clients&#xa;(Web / Mobile)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="80" y="240" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="gateway" value="API Gateway&#xa;(Go)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="320" y="240" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="redis" value="Redis&#xa;Rate Limit / Idempotency Cache" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="320" y="120" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="postgres" value="PostgreSQL&#xa;- Users / Templates / Status" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="650" y="50" width="220" height="100" as="geometry" />
        </mxCell>
        <mxCell id="userService" value="User Service&#xa;(NestJS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="580" y="210" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="templateService" value="Template Service&#xa;(NestJS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="580" y="300" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="rabbitmq" value="RabbitMQ&#xa;notifications.direct" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="820" y="230" width="180" height="100" as="geometry" />
        </mxCell>
        <mxCell id="emailService" value="Email Service&#xa;(Python/FastAPI)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="1040" y="170" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pushService" value="Push Service&#xa;(Go Worker)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;" vertex="1" parent="1">
          <mxGeometry x="1040" y="300" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="dlq" value="failed.queue&#xa;(DLQ)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="820" y="360" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="statusStore" value="Status Store&#xa;(Postgres table)" style="shape=process;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1040" y="400" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mqToEmail" value="email.queue" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="rabbitmq" target="emailService">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1020" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mqToPush" value="push.queue" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="rabbitmq" target="pushService">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1020" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gatewayToUser" value="JWT/Auth + Prefs" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="gateway" target="userService">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gatewayToTemplate" value="Template lookup" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="gateway" target="templateService">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="clientToGateway" value="REST /v1/notifications" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="client" target="gateway">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gatewayToRabbit" value="Publish&#xa;channel=email/push" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="gateway" target="rabbitmq">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="redisEdge" value="Idempotency / Rate limit" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="gateway" target="redis">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="410" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="userDBEdge" value="" style="endArrow=classic;dashed=1;html=1;" edge="1" parent="1" source="userService" target="postgres">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="templateDBEdge" value="" style="endArrow=classic;dashed=1;html=1;" edge="1" parent="1" source="templateService" target="postgres">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="730" y="180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="emailStatusEdge" value="Update status" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="emailService" target="statusStore">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pushStatusEdge" value="Update status" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="pushService" target="statusStore">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rabbitToDlq" value="Retries exhausted" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="rabbitmq" target="dlq">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="statusToGateway" value="GET /status" style="endArrow=classic;html=1;fontSize=11;" edge="1" parent="1" source="statusStore" target="gateway">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
